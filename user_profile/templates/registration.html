<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <title>Медиа 57:: регистрация</title>
</head>

<body>
    <div class="header"></div>
    <div class="content">
        {{ error }}
        <div id="registration-forms">
            <form method="post">
                {% csrf_token %}
                <div id="general-registration">
                    <ul>
                        {{ general_reg_form.as_ul }}
                    </ul>
                </div>
                <div id="student-registration">
                    <input type="checkbox" v-model="checked" id="student-registration-form">
                    <ul id="student_reg_list">
                        {{ student_reg_form.as_ul }}
                    </ul>
                </div>
                <div id="teacher-registration">
                    <input type="checkbox" v-model="checked">
                    <ul v-if="checked">
                        {{ teacher_reg_form.as_ul }}
                    </ul>
                </div>
                <input type="submit" value="Зарегистрироваться">
            </form>
        </div>
    </div>
    <div class="footer"></div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        "use strict";

        let teacher_reg = new Vue({
            el: "#teacher-registration",
            data: {
                checked: false
            }
        });
        document.getElementById("student_reg_list").style.display = "none";
        let student_reg_form = document.getElementById("student-registration-form");
        student_reg_form.addEventListener("change", function(){
            console.log(student_reg_form.checked)
            let grade_letter = document.getElementById("grade-letter");
            let end_year = document.getElementById("end-year");
            if (student_reg_form.checked){
                document.getElementById("student_reg_list").style.display = "block";
                document.getElementById("end-year").addEventListener(
                "change", function(){
                    console.log($("#end-year").val());
                    $("#id_grade_letter").empty();
                    $.getJSON("/get_grades",
                    {
                        'year': $("#end-year").val()
                    }, function(data){
                        console.log(data)
                    })
                }
                )
            }
            else{
                document.getElementById("student_reg_list").style.display = "none";
            }
        });
    </script>
</body>
</html>
